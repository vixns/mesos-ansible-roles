#!/bin/bash
exec 1> >(exec logger -p user.info -t "$(basename $(pwd))[$(cat $(pwd)/supervise/pid)]")
exec 2> >(exec logger -p user.err -t "$(basename $(pwd))[$(cat $(pwd)/supervise/pid)]")
export IP="{{internal_ip}}"
export HOSTNAME="{{ansible_hostname}}"
mkdir -p /run/bird
exec /usr/bin/bird -R -s /run/bird/bird.ctl -d -c /etc/calico/confd/config/bird.cfg